import{l as f,n as u,r as c,z as y,ba as F,o as d,Q as b,j as e,W as L,y as C,G as N,B as x,S as p,C as v,L as T,D as k}from"./index-ef06bb94.js";import"./ckeditor-54d5a1f1.js";import{c as w,a as E}from"./object-b811dff8.js";import{T as I}from"./TextField-f4746776.js";import"./identity-69e6ff7f.js";import"./Select-28047b4e.js";import"./Menu-32b2f8ca.js";import"./isMuiElement-7cfb1190.js";const B=w().shape({title:E().required("Title is required")});function G(){var m;const r=f(),o=u(i=>i),s=u(i=>i.property),g=(m=o==null?void 0:o.auth.user)==null?void 0:m.token,[n,h]=c.useState(""),t=y({initialValues:{title:""},validationSchema:B,onSubmit:async(i,{setSubmitting:l})=>{try{const a=new FormData;a.append("title",i.title),n&&a.append("f-image",n),await r(F({formData:a,token:g})),t.resetForm(),h(""),r(d())}catch(a){t.resetForm(),setTimeout(()=>{r(d())},300),console.error("Error submitting form:",a)}finally{l(!1)}}}),j=i=>{const l=i.target.files[0];h(l)};return c.useEffect(()=>{r(d())},[r]),c.useEffect(()=>{s!=null&&s.isSuccess&&(s!=null&&s.postedFeatNLogo)&&b.success("property posted Successfullly!")},[s==null?void 0:s.isSuccess,s==null?void 0:s.postedFeatNLogo]),e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsx("title",{children:"JEA | Features N Icons "})}),e.jsx(C,{maxWidth:"xl",children:e.jsxs(N,{container:!0,spacing:3,children:[e.jsx("h2",{style:{padding:"3rem 2rem"},children:"Post Features And Icons"}),e.jsx(x,{sx:{height:1,width:"100%",padding:"30px"},children:e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx(p,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsx(v,{sx:{p:5,width:1,maxWidth:620},children:e.jsxs(p,{spacing:3,children:[e.jsx(I,{label:"Name",name:"title",value:t.values.title,onChange:t.handleChange,error:t.touched.title&&!!t.errors.title,helperText:t.touched.title&&t.errors.title}),e.jsx(p,{children:e.jsxs("div",{className:"upload-wrap",children:[e.jsxs("label",{htmlFor:"inputTag",className:"upload-label",children:[e.jsx("img",{src:"/assets/icons/shape-avatar.svg",alt:""}),e.jsx("span",{children:"Upload Logo"}),e.jsx("input",{name:"image",id:"inputTag",type:"file",className:"upload-input",onChange:j})]}),e.jsx("span",{children:"Max file size 2MB."})]})}),e.jsx("div",{style:{width:"100px",height:"100px",background:"grey",display:"flex",justifyContent:"center",alignItems:"center"},children:n&&e.jsx("img",{src:URL.createObjectURL(n),alt:"Selected"})}),e.jsx(T,{sx:{marginTop:"25px"},fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",children:s!=null&&s.isLoading?e.jsx(x,{sx:{display:"flex"},children:e.jsx(k,{})}):"Post"})]})})})})})]})})]})}export{G as default};
