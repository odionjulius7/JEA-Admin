import{$ as W,l as q,n as w,i as A,r as f,z as R,a0 as E,o as _,j as a,S as i,M as h,T as x,L as T,B as P,D as S,Q as F,y as O,G as U,a1 as G,f as $,C as z,W as K}from"./index-ef06bb94.js";import{c as M,a as d,b as I}from"./object-b811dff8.js";import{T as V}from"./TextArea-b0715c8d.js";import{T as o,F as b,I as y}from"./TextField-f4746776.js";import{S as j}from"./Select-28047b4e.js";import"./identity-69e6ff7f.js";import"./compact-item-096ab725.js";import"./useToken-0a3b88fd.js";import"./Menu-32b2f8ca.js";import"./isMuiElement-7cfb1190.js";const Y=M().shape({title:d().required("Title is required"),price:I().required("Price is required"),number_of_room:I(),location:d().required("Location is required"),description:d(),agent_whatsapp:d(),agent_call:d(),category:d().required("Category is required"),tag:d().required("Tag is required")});function Q(){var v;const B=W(),u=q(),p=w(r=>r),t=w(r=>r.property),N=(v=p==null?void 0:p.auth.user)==null?void 0:v.token,D=A(),[c,m]=f.useState([]),e=R({initialValues:{title:"",price:0,number_of_room:"",location:"",description:"",category:"",tag:"",agent_whatsapp:"",agent_call:"",address:"",additional_fees:"",property_id:"",property_type:"",year_built:"",details_category:"",status:"",Number_of_Stories:"",garage_capacity:"",recent_renovations:"",youtube_url:"",neighborhood_info1:"",neighborhood_info2:"",neighborhood_info3:"",neighborhood_info4:"",neighborhood_info5:"",neighborhood_info6:"",feature_1:"",feature_2:"",feature_3:"",feature_4:"",feature_5:"",feature_6:"",feature_7:"",feature_8:""},validationSchema:Y,onSubmit:async(r,{setSubmitting:l})=>{try{const n=new FormData;n.append("title",r.title),n.append("price",r.price),n.append("number_of_room",r.number_of_room),n.append("description",r.description),n.append("category",r.category),n.append("location",r.location),n.append("tag",r.tag),n.append("agent_call",r.agent_call),n.append("agent_whatsapp",r.agent_whatsapp),n.append("address",r.address),n.append("additional_fees",r.additional_fees),n.append("property_id",r.property_id),n.append("property_type",r.property_type),n.append("year_built",r.year_built),n.append("details_category",r.details_category),n.append("status",r.status),n.append("Number_of_Stories",r.Number_of_Stories),n.append("garage_capacity",r.garage_capacity),n.append("recent_renovations",r.recent_renovations),n.append("youtube_url",r.youtube_url),n.append("neighborhood_info1",r.neighborhood_info1),n.append("neighborhood_info2",r.neighborhood_info2),n.append("neighborhood_info3",r.neighborhood_info3),n.append("neighborhood_info4",r.neighborhood_info4),n.append("neighborhood_info5",r.neighborhood_info5),n.append("neighborhood_info6",r.neighborhood_info6),n.append("feature_1",r.feature_1),n.append("feature_2",r.feature_2),n.append("feature_3",r.feature_3),n.append("feature_4",r.feature_4),n.append("feature_5",r.feature_5),n.append("feature_6",r.feature_6),n.append("feature_7",r.feature_7),n.append("feature_8",r.feature_8);for(let s=0;s<c.length;s+=1)n.append("images",c[s]);await u(E({formData:n,token:N})),e.resetForm(),m([]),u(_()),B.push("/property-list")}catch(n){e.resetForm(),setTimeout(()=>{u(_())},300),console.error("Error submitting form:",n)}finally{l(!1)}}}),L=r=>{const l=Array.from(r.target.files),n=[];let g=!1;l.forEach(s=>{s.size>5e5?(alert(`File "${s.name}" exceeds 500KB. Please select a smaller file.`),g=!0):n.push(s)}),g||m(s=>[...s,...n])},C=r=>{const l=c.filter((n,g)=>r!==g);m(l)},k=a.jsx("form",{onSubmit:e.handleSubmit,children:a.jsxs(i,{spacing:4,children:[a.jsx(o,{label:"Property Title",name:"title",value:e.values.title,onChange:e.handleChange,error:e.touched.title&&!!e.errors.title,helperText:e.touched.title&&e.errors.title}),a.jsx(o,{label:"Property Location",name:"location",value:e.values.location,onChange:e.handleChange,error:e.touched.location&&!!e.errors.location,helperText:e.touched.location&&e.errors.location}),a.jsx(o,{label:"Agent Call Num.",name:"agent_call",value:e.values.agent_call,onChange:e.handleChange,error:e.touched.agent_call&&!!e.errors.agent_call,helperText:e.touched.agent_call&&e.errors.agent_call}),a.jsx(o,{label:"Agent Whatsapp Num.",name:"agent_whatsapp",value:e.values.agent_whatsapp,onChange:e.handleChange,error:e.touched.agent_whatsapp&&!!e.errors.agent_whatsapp,helperText:e.touched.agent_whatsapp&&e.errors.agent_whatsapp}),a.jsx(o,{label:"Number Of Room",name:"number_of_room",value:e.values.number_of_room,onChange:e.handleChange,error:e.touched.number_of_room&&!!e.errors.number_of_room,helperText:e.touched.number_of_room&&e.errors.number_of_room}),a.jsxs(b,{fullWidth:!0,children:[a.jsx(y,{id:"category-label",children:"Property Category"}),a.jsxs(j,{labelId:"category-label",id:"category",name:"category",value:e.values.category,onChange:e.handleChange,label:"Property Category",error:e.touched.category&&!!e.errors.category,helperText:e.touched.category&&e.errors.category,children:[a.jsx(h,{value:"buy",children:"Buy"}),a.jsx(h,{value:"rent",children:"Rent"}),a.jsx(h,{value:"land",children:"Land"}),a.jsx(h,{value:"shortlet",children:"Short Let"})]})]}),a.jsxs(b,{fullWidth:!0,children:[a.jsx(y,{id:"category-label",children:"Tag Property"}),a.jsxs(j,{labelId:"tag-label",id:"tag",name:"tag",value:e.values.tag,onChange:e.handleChange,label:"Tag Property",error:e.touched.tag&&!!e.errors.tag,helperText:e.touched.tag&&e.errors.tag,children:[a.jsx(h,{value:"featured",children:"Featured"}),a.jsx(h,{value:"property of the week",children:"Property Of The Week"}),a.jsx(h,{value:"available luxury",children:"Available Luxury"})]})]}),a.jsx(o,{label:"Property Price",name:"price",onChange:e.handleChange,error:e.touched.price&&!!e.errors.price,helperText:e.touched.price&&e.errors.price}),a.jsxs("div",{style:{margin:"2rem"},children:[a.jsx("h4",{style:{marginBottom:"1rem"},children:"Property Details:"}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsx(o,{label:"Address",name:"address",value:e.values.address,onChange:e.handleChange}),a.jsx(o,{label:"Additional Fees",name:"additional_fees",value:e.values.additional_fees,onChange:e.handleChange})]}),a.jsx(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:a.jsx(o,{label:"Property Id",name:"property_id",value:e.values.property_id,onChange:e.handleChange})}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsx(o,{label:"Property Type",name:"property_type",value:e.values.property_type,onChange:e.handleChange}),a.jsx(o,{label:"Year Built",name:"year_built",value:e.values.year_built,onChange:e.handleChange}),a.jsx(o,{label:"Detail Category",name:"details_category",value:e.values.details_category,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsxs(b,{fullWidth:!0,children:[a.jsx(y,{id:"category-label",children:"Status"}),a.jsxs(j,{labelId:"status",id:"status",name:"status",value:e.values.status,onChange:e.handleChange,label:"Status",error:e.touched.status&&!!e.errors.status,helperText:e.touched.status&&e.errors.status,children:[a.jsx(h,{value:"Active",children:"Active"}),a.jsx(h,{value:"Inactive",children:"Inactive"})]})]}),a.jsx(o,{label:"Number of Stories",name:"Number_of_Stories",value:e.values.Number_of_Stories,onChange:e.handleChange}),a.jsx(o,{label:"Garage Capacity",name:"garage_capacity",value:e.values.garage_capacity,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsx(o,{label:"Recent Renovations",name:"recent_renovations",value:e.values.recent_renovations,onChange:e.handleChange}),a.jsx(o,{label:"Youtube URL",name:"youtube_url",value:e.values.youtube_url,onChange:e.handleChange})]})]}),a.jsxs("div",{style:{margin:"2rem"},children:[a.jsx("h4",{style:{marginBottom:"1rem"},children:"Amenities & Features:"}),a.jsxs("div",{children:[a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginBottom:"1rem"},children:[a.jsx(o,{label:"Feature 1",name:"feature_1",value:e.values.feature_1,onChange:e.handleChange}),a.jsx(o,{label:"Feature 2",name:"feature_2",value:e.values.feature_2,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginBottom:"1rem"},children:[a.jsx(o,{label:"Feature 3",name:"feature_3",value:e.values.feature_3,onChange:e.handleChange}),a.jsx(o,{label:"Feature 4",name:"feature_4",value:e.values.feature_4,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between"},children:[" ",a.jsx(o,{label:"Feature 5",name:"feature_5",value:e.values.feature_5,onChange:e.handleChange}),a.jsx(o,{label:"Feature 6",name:"feature_6",value:e.values.feature_6,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsx(o,{label:"Feature 7",name:"feature_7",value:e.values.feature_7,onChange:e.handleChange}),a.jsx(o,{label:"Feature 8",name:"feature_8",value:e.values.feature_8,onChange:e.handleChange})]})]})]}),a.jsxs("div",{style:{margin:"2rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[a.jsx("h4",{style:{marginBottom:"1rem"},children:"Neighborhood Information:"}),a.jsx(o,{label:"Neighborhood Info. ",name:"neighborhood_info1",value:e.values.neighborhood_info1,onChange:e.handleChange}),a.jsx(o,{label:"Other Neighborhood Info.",name:"neighborhood_info2",value:e.values.neighborhood_info2,onChange:e.handleChange}),a.jsx(o,{label:"Other Neighborhood Info.",name:"neighborhood_info3",value:e.values.neighborhood_info3,onChange:e.handleChange}),a.jsx(o,{label:"Other Neighborhood Info.",name:"neighborhood_info4",value:e.values.neighborhood_info4,onChange:e.handleChange}),a.jsx(o,{label:"Other Neighborhood Info.",name:"neighborhood_info5",value:e.values.neighborhood_info5,onChange:e.handleChange}),a.jsx(o,{label:"Other Neighborhood Info.",name:"neighborhood_info6",value:e.values.neighborhood_info6,onChange:e.handleChange})]}),a.jsx(V,{rows:4,placeholder:"Property Description",maxLength:800,name:"description",value:e.values.description,onChange:e.handleChange}),a.jsx(i,{children:a.jsx("div",{className:"upload-wrap",children:a.jsxs("label",{htmlFor:"file-input",children:[a.jsx(x,{variant:"body2",sx:{mb:1},children:"Choose Images (500KB max each):"}),a.jsx(x,{variant:"body2",sx:{mb:1},children:"Image width (max 1200px each):"}),a.jsx(i,{direction:"row",spacing:1,children:a.jsx(T,{variant:"contained",component:"span",color:"primary",style:{height:"2rem"},children:"Upload Product images"})}),a.jsx("input",{accept:"image/*",id:"file-input",type:"file",name:"images",multiple:!0,onChange:L,style:{display:"none"}})]})})}),a.jsx("div",{style:{display:"flex",gap:"15px",maxWidth:"90%",flexWrap:"wrap"},children:c==null?void 0:c.map((r,l)=>a.jsxs("div",{className:"image-display",style:{height:"auto",width:"30%"},children:[a.jsx("img",{src:URL.createObjectURL(r),alt:r.name,style:{width:"90%"}})," ",a.jsx("span",{role:"button",tabIndex:0,style:{border:"1px solid red",color:"orangered",cursor:"pointer"},className:"px-2",onClick:()=>C(l),onKeyDown:n=>n.key==="Enter"&&C(l),children:"x"})]},l))}),a.jsx(T,{sx:{marginTop:"25px"},fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",children:t!=null&&t.isLoading?a.jsx(P,{sx:{display:"flex"},children:a.jsx(S,{})}):"Post"})]})});return f.useEffect(()=>{u(_())},[u]),f.useEffect(()=>{t!=null&&t.isSuccess&&(t!=null&&t.postedProperty)&&F.success("property posted Successfullly!"),t!=null&&t.isError&&F.error("Failed!, If problem persist try login again")},[t==null?void 0:t.isSuccess,t==null?void 0:t.postedProperty,t==null?void 0:t.isError]),a.jsxs(O,{maxWidth:"xl",children:[a.jsx(x,{variant:"h4",sx:{mb:5},children:"Post Property"}),a.jsx(U,{container:!0,spacing:3,children:a.jsx(P,{sx:{...G({color:$(D.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1,width:"100%",padding:"50px"},children:a.jsx(i,{alignItems:"center",justifyContent:"center",sx:{height:1},children:a.jsx(z,{sx:{p:5,width:1,maxWidth:820},children:k})})})})]})}function ie(){return a.jsxs(a.Fragment,{children:[a.jsx(K,{children:a.jsx("title",{children:" Reviel | Post Product "})}),a.jsx(Q,{})]})}export{ie as default};
