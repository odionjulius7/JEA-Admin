import{m as c,j as t,q as b,l as j,a4 as y,r as h,a5 as v,a6 as D,B as x,W as F}from"./index-d14368b9.js";import"./account-view-e02010a4.js";import{h as u}from"./moment-5381583a.js";import{D as w}from"./DataGrid-494ad8de.js";import{C as A}from"./Container-b3d9ce9a.js";import{G as l}from"./Grid-98f9fb9e.js";import{T as C,a as L,b as g,c as f}from"./TabPanel-a2e11030.js";import"./object-c5e16c01.js";import"./identity-36fa5d56.js";import"./formik.esm-987cff98.js";import"./CircularProgress-4f04eb9b.js";import"./TextField-e8821679.js";import"./Select-98f54594.js";import"./Menu-7dac6899.js";import"./isMuiElement-f40431e3.js";import"./InputAdornment-33e2c6bd.js";import"./Card-a564b324.js";import"./Autocomplete-45e0406b.js";import"./FormControlLabel-d8c9ddcf.js";const S=[{field:"id",headerName:"Loan ID",width:90,renderCell:i=>t.jsx("a",{href:`/loan/${i.row.id}`,children:i.value})},{field:"lender",headerName:"Lender",width:130},{field:"borrower",headerName:"Borrower",width:130},{field:"loanAmount",headerName:"Loan Value",width:130},{field:"expectedReturn",headerName:"Expected Return",width:130},{field:"balance",headerName:"Balance",width:130},{field:"initiationDate",headerName:"Initiation Date",width:120},{field:"dueDate",headerName:"Due Date",width:120},{field:"status",headerName:"Status",width:90,renderCell:i=>t.jsx(b,{variant:"contained",color:i.value==="active"&&"error"||"success",style:{padding:"0 0.6rem"},children:i.value})}];function G(){const i=c(e=>e.loan),a=[i==null?void 0:i.loan];function s(e){return e/100}const n=a==null?void 0:a.map((e,r)=>{const d={id:(e==null?void 0:e.id)||0,lender:e==null?void 0:e.lender_first_name,borrower:e==null?void 0:e.borrower_first_name,loanAmount:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s(e==null?void 0:e.amount)),expectedReturn:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s(e==null?void 0:e.expected_return)),balance:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format((s(e==null?void 0:e.expected_return)??0)-(s(e==null?void 0:e.amount_paid)??0)),initiationDate:u(e==null?void 0:e.createdAt).format("L"),dueDate:u(e==null?void 0:e.due_date).format("L"),status:e!=null&&e.status?"completed":"active"};return d.index=r,d});return t.jsxs("div",{style:{minHeight:200,backgroundColor:"#FFFFFF",borderRadius:"20px",boxShadow:"0 0 2px 0 rgba(145, 158, 171, 0.08), 0 12px 24px -4px rgba(145, 158, 171, 0.08)"},children:[t.jsx("h2",{style:{padding:"2rem 0rem 1rem 1rem"},children:"Loan Details"}),t.jsx(w,{rows:n,columns:S,initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},pageSizeOptions:[5,10]})]})}const T=[{field:"id",headerName:"Payment",width:70},{field:"amount",headerName:"Value",width:130},{field:"date",headerName:"Date",width:130},{field:"status",headerName:"Status",width:120,renderCell:i=>t.jsx(b,{variant:"text",color:i.value==="contested"&&"error"||i.value==="rejected"&&"error"||i.value==="awaiting_approval"&&"warning"||"success",style:{padding:"0 1rem"},children:i.value})},{field:"message",headerName:"Message",width:190}];function _(){var e;const i=c(r=>r.loan),a=((e=i==null?void 0:i.loan)==null?void 0:e.payment)||[];console.log(a);function s(r){return r/100}const n=a==null?void 0:a.map((r,d)=>{const m={id:d+1,amount:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s(r==null?void 0:r.amount)),date:u(r==null?void 0:r.createdAt).format("L"),status:r==null?void 0:r.status,message:r!=null&&r.message?r==null?void 0:r.message:""};return m.index=d,m});return t.jsx("div",{style:{minHeight:200,width:"60%",backgroundColor:"#FFFFFF",borderRadius:"20px",boxShadow:"0 0 2px 0 rgba(145, 158, 171, 0.08), 0 12px 24px -4px rgba(145, 158, 171, 0.08)"},children:t.jsx(w,{rows:n,columns:T,initialState:{pagination:{paginationModel:{page:0,pageSize:7}}},pageSizeOptions:[7,15]})})}function B(){var m,p;const i=j(),{id:a}=y();c(o=>o.loan);const s=c(o=>o),n=(p=(m=s==null?void 0:s.auth.user)==null?void 0:m.data)==null?void 0:p.token;h.useEffect(()=>{const o={token:n,id:a};i(v()),i(D(o))},[i,n,a]);const[e,r]=h.useState("1"),d=(o,N)=>{r(N)};return t.jsxs(A,{children:[t.jsx(l,{sx:{padding:"0 1rem"},children:t.jsx(G,{})}),t.jsx(x,{sx:{width:"100%",typography:"body1"},children:t.jsxs(C,{value:e,children:[t.jsx(x,{sx:{borderBottom:"1px solid",borderColor:"rgba(145, 158, 171, 0.2)",margin:"4rem 2rem 0rem 0rem",width:"70%"},children:t.jsxs(L,{sx:{".css-heg063-MuiTabs-flexContainer":{justifyContent:"center",gap:"1rem"}},onChange:d,"aria-label":"lab API tabs example",children:[t.jsx(g,{label:"Loan Repayment Breakdown",value:"1",sx:{fontSize:"20px"}}),t.jsx(g,{label:"Agreements",value:"2",sx:{fontSize:"20px"}})]})}),t.jsx(f,{value:"1",children:t.jsx(l,{sx:{padding:"0 1rem",marginTop:"4.2rem"},children:t.jsx(_,{})})}),t.jsx(f,{value:"2",children:"2"})]})})]})}function Z(){return t.jsxs(t.Fragment,{children:[t.jsx(F,{children:t.jsx("title",{children:"JEA | Details"})}),t.jsx(B,{})]})}export{Z as default};
