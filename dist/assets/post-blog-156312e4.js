import{l as C,n as x,r as c,x as v,o as d,Q as u,j as e,W as B,B as f,S as m}from"./index-a7172a34.js";import"./ckeditor-7e926efd.js";import{c as T,a as E}from"./object-b83ac8c8.js";import{u as F,L as P}from"./formik.esm-c2c8fe8c.js";/* empty css                   */import{C as k}from"./Container-d0fe347a.js";import{G as w}from"./Grid-2b309a35.js";import{C as L}from"./Card-da7c21cf.js";import{T as j}from"./TextField-7a813393.js";import{C as b}from"./CircularProgress-b20656ae.js";import"./identity-47e56946.js";import"./Button-6a300f6d.js";import"./useId-4aefd2c5.js";import"./Select-36597a66.js";import"./Menu-11169359.js";import"./isMuiElement-ee1a0ecd.js";const D=T().shape({title:E().required("Title is required")});function X(){var h;const a=C(),n=x(r=>r),s=x(r=>r.property),g=(h=n==null?void 0:n.auth.user)==null?void 0:h.token,[o,p]=c.useState(""),i=F({initialValues:{title:"",body:""},validationSchema:D,onSubmit:async(r,{setSubmitting:l})=>{try{const t=new FormData;t.append("title",r.title),t.append("body",r.body),o&&t.append("image",o),await a(v({formData:t,token:g})),i.resetForm(),p(""),a(d())}catch(t){i.resetForm(),setTimeout(()=>{a(d())},300),console.error("Error submitting form:",t)}finally{l(!1)}}}),y=r=>{const l=r.target.files[0];p(l)};return c.useEffect(()=>{a(d())},[a]),c.useEffect(()=>{s!=null&&s.isSuccess&&(s!=null&&s.postedBlog)&&u.success("Posted successfullly!"),s!=null&&s.isError&&u.error("Post failed!")},[s==null?void 0:s.isSuccess,s==null?void 0:s.postedBlog,s==null?void 0:s.isError]),e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsx("title",{children:"JEA | Post "})}),e.jsx(k,{maxWidth:"xl",children:e.jsxs(w,{container:!0,spacing:3,children:[e.jsx("h2",{style:{padding:"3rem 2rem"},children:"Post Agent"}),e.jsx(f,{sx:{height:1,width:"100%",padding:"30px"},children:e.jsx("form",{onSubmit:i.handleSubmit,children:e.jsx(m,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsx(L,{sx:{p:5,width:1,maxWidth:620},children:e.jsxs(m,{spacing:3,children:[e.jsx(j,{label:"Name",name:"title",value:i.values.title,onChange:i.handleChange,error:i.touched.title&&!!i.errors.title,helperText:i.touched.title&&i.errors.title}),e.jsx("div",{children:e.jsx(j,{label:"Job Description",name:"body",value:i.values.body,onChange:i.handleChange})}),e.jsx(m,{children:e.jsxs("div",{className:"upload-wrap",children:[e.jsxs("label",{htmlFor:"inputTag",className:"upload-label",children:[e.jsx("img",{src:"/assets/icons/shape-avatar.svg",alt:""}),e.jsx("span",{children:"Upload Images"}),e.jsx("input",{name:"image",id:"inputTag",type:"file",className:"upload-input",onChange:y})]}),e.jsxs("span",{children:["Max file size 2MB. ",e.jsx("br",{})," CTRL+ click to select multiple images"]})]})}),e.jsx("div",{style:{width:"400px",height:"auto"},children:o&&e.jsx("img",{src:URL.createObjectURL(o),alt:"Selected"})}),e.jsx(P,{sx:{marginTop:"25px"},fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",children:s!=null&&s.isLoading?e.jsx(f,{sx:{display:"flex"},children:e.jsx(b,{})}):"Post"})]})})})})})]})})]})}export{X as default};
