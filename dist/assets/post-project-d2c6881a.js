import{l as P,m as b,i as F,r as g,$ as N,n as m,j as a,S as i,M as y,B as j,Q as D,T as I,Z as B,f as S,W as L}from"./index-d14368b9.js";import{c as k,a as d,b as q}from"./object-c5e16c01.js";import{u as R,L as W}from"./formik.esm-987cff98.js";import{T as A}from"./TextArea-c181818b.js";import{T as r,F as E,I as O}from"./TextField-e8821679.js";import{S as U}from"./Select-98f54594.js";import{C as G}from"./CircularProgress-4f04eb9b.js";import{C as M}from"./Container-b3d9ce9a.js";import{G as $}from"./Grid-98f9fb9e.js";import{C as z}from"./Card-a564b324.js";import"./identity-36fa5d56.js";import"./compact-item-f64ad55b.js";import"./useToken-99fd092c.js";import"./Menu-7dac6899.js";import"./isMuiElement-f40431e3.js";const V=k().shape({title:d().required("Title is required"),price:q().required("Price is required"),number_of_room:d(),location:d().required("Location is required"),description:d(),category:d().required("Category is required")});function Y(){var f;const h=P(),c=b(n=>n),t=b(n=>n.property),C=(f=c==null?void 0:c.auth.user)==null?void 0:f.token,v=F(),[s,p]=g.useState([]),e=R({initialValues:{title:"",price:0,number_of_room:"",location:"",description:"",category:"",agent_whatsapp:"",agent_call:"",address:"",additional_fees:"",property_id:"",property_type:"",year_built:"",details_category:"",status:"",Number_of_Stories:"",garage_capacity:"",recent_renovations:"",youtube_url:"",neighborhood_info1:"",neighborhood_info2:"",neighborhood_info3:"",neighborhood_info4:"",neighborhood_info5:"",neighborhood_info6:"",feature_1:"",feature_2:"",feature_3:"",feature_4:"",feature_5:"",feature_6:"",feature_7:"",feature_8:""},validationSchema:V,onSubmit:async(n,{setSubmitting:l})=>{try{const o=new FormData;o.append("title",n.title),o.append("price",n.price),o.append("number_of_room",n.number_of_room),o.append("description",n.description),o.append("category",n.category),o.append("location",n.location),o.append("agent_call",n.agent_call),o.append("agent_whatsapp",n.agent_whatsapp),o.append("address",n.address),o.append("additional_fees",n.additional_fees),o.append("property_id",n.property_id),o.append("property_type",n.property_type),o.append("year_built",n.year_built),o.append("details_category",n.details_category),o.append("status",n.status),o.append("Number_of_Stories",n.Number_of_Stories),o.append("garage_capacity",n.garage_capacity),o.append("recent_renovations",n.recent_renovations),o.append("youtube_url",n.youtube_url),o.append("neighborhood_info1",n.neighborhood_info1),o.append("neighborhood_info2",n.neighborhood_info2),o.append("neighborhood_info3",n.neighborhood_info3),o.append("neighborhood_info4",n.neighborhood_info4),o.append("neighborhood_info5",n.neighborhood_info5),o.append("neighborhood_info6",n.neighborhood_info6),o.append("feature_1",n.feature_1),o.append("feature_2",n.feature_2),o.append("feature_3",n.feature_3),o.append("feature_4",n.feature_4),o.append("feature_5",n.feature_5),o.append("feature_6",n.feature_6),o.append("feature_7",n.feature_7),o.append("feature_8",n.feature_8);for(let u=0;u<s.length;u+=1)o.append("images",s[u]);await h(N({formData:o,token:C})),e.resetForm(),p([]),h(m())}catch(o){e.resetForm(),setTimeout(()=>{h(m())},300),console.error("Error submitting form:",o)}finally{l(!1)}}}),w=n=>{p([...s,...n.target.files])},_=n=>{const l=s.filter((o,x)=>n!==x);p(l)},T=a.jsx("form",{onSubmit:e.handleSubmit,children:a.jsxs(i,{spacing:4,children:[a.jsx(r,{label:"Title",name:"title",value:e.values.title,onChange:e.handleChange,error:e.touched.title&&!!e.errors.title,helperText:e.touched.title&&e.errors.title}),a.jsx(r,{label:"Project Location",name:"location",value:e.values.location,onChange:e.handleChange,error:e.touched.location&&!!e.errors.location,helperText:e.touched.location&&e.errors.location}),a.jsx(r,{label:"Number Of Room",name:"number_of_room",value:e.values.number_of_room,onChange:e.handleChange,error:e.touched.number_of_room&&!!e.errors.number_of_room,helperText:e.touched.number_of_room&&e.errors.number_of_room}),a.jsx(r,{label:"Agent Call Num.",name:"agent_call",value:e.values.agent_call,onChange:e.handleChange,error:e.touched.agent_call&&!!e.errors.agent_call,helperText:e.touched.agent_call&&e.errors.agent_call}),a.jsx(r,{label:"Agent Whatsapp Num.",name:"agent_whatsapp",value:e.values.agent_whatsapp,onChange:e.handleChange,error:e.touched.agent_whatsapp&&!!e.errors.agent_whatsapp,helperText:e.touched.agent_whatsapp&&e.errors.agent_whatsapp}),a.jsxs(E,{fullWidth:!0,children:[a.jsx(O,{id:"category-label",children:"Project Status Category"}),a.jsxs(U,{labelId:"category-label",id:"category",name:"category",value:e.values.category,onChange:e.handleChange,label:"Property Category",error:e.touched.category&&!!e.errors.category,helperText:e.touched.category&&e.errors.category,children:[a.jsx(y,{value:"completed",children:"completed"}),a.jsx(y,{value:"ongoing",children:"ongoing"})]})]}),a.jsx(r,{label:"Price",name:"price",onChange:e.handleChange,error:e.touched.price&&!!e.errors.price,helperText:e.touched.price&&e.errors.price}),a.jsxs("div",{style:{margin:"2rem"},children:[a.jsx("h4",{style:{marginBottom:"1rem"},children:"Property Details:"}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsx(r,{label:"Address",name:"address",value:e.values.address,onChange:e.handleChange}),a.jsx(r,{label:"Additional Fees",name:"additional_fees",value:e.values.additional_fees,onChange:e.handleChange})]}),a.jsx(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:a.jsx(r,{label:"Property Id",name:"property_id",value:e.values.property_id,onChange:e.handleChange})}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsx(r,{label:"Property Type",name:"property_type",value:e.values.property_type,onChange:e.handleChange}),a.jsx(r,{label:"Year Built",name:"year_built",value:e.values.year_built,onChange:e.handleChange}),a.jsx(r,{label:"Detail Category",name:"details_category",value:e.values.details_category,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsx(r,{label:"Status",name:"status",value:e.values.status,onChange:e.handleChange}),a.jsx(r,{label:"Number of Stories",name:"Number_of_Stories",value:e.values.Number_of_Stories,onChange:e.handleChange}),a.jsx(r,{label:"Garage Capacity",name:"garage_capacity",value:e.values.garage_capacity,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsx(r,{label:"Recent Renovations",name:"recent_renovations",value:e.values.recent_renovations,onChange:e.handleChange}),a.jsx(r,{label:"Youtube URL",name:"youtube_url",value:e.values.youtube_url,onChange:e.handleChange})]})]}),a.jsxs("div",{style:{margin:"2rem"},children:[a.jsx("h4",{style:{marginBottom:"1rem"},children:"Amenities & Features:"}),a.jsxs("div",{children:[a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between"},children:[a.jsx(r,{label:"Feature 1",name:"feature_1",value:e.values.feature_1,onChange:e.handleChange}),a.jsx(r,{label:"Feature 2",name:"feature_2",value:e.values.feature_2,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between"},children:[a.jsx(r,{label:"Feature 3",name:"feature_3",value:e.values.feature_3,onChange:e.handleChange}),a.jsx(r,{label:"Feature 4",name:"feature_4",value:e.values.feature_4,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between"},children:[" ",a.jsx(r,{label:"Feature 5",name:"feature_5",value:e.values.feature_5,onChange:e.handleChange}),a.jsx(r,{label:"Feature 6",name:"feature_6",value:e.values.feature_6,onChange:e.handleChange})]}),a.jsxs(i,{spacing:2,sx:{flexDirection:"column",justifyContent:"space-between",marginTop:"1rem"},children:[a.jsx(r,{label:"Feature 7",name:"feature_7",value:e.values.feature_7,onChange:e.handleChange}),a.jsx(r,{label:"Feature 8",name:"feature_8",value:e.values.feature_8,onChange:e.handleChange})]})]})]}),a.jsxs("div",{style:{margin:"2rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[a.jsx("h4",{style:{marginBottom:"1rem"},children:"Neighborhood Information:"}),a.jsx(r,{label:"Neighborhood Info. ",name:"neighborhood_info1",value:e.values.neighborhood_info1,onChange:e.handleChange}),a.jsx(r,{label:"Other Neighborhood Info.",name:"neighborhood_info2",value:e.values.neighborhood_info2,onChange:e.handleChange}),a.jsx(r,{label:"Other Neighborhood Info.",name:"neighborhood_info3",value:e.values.neighborhood_info3,onChange:e.handleChange}),a.jsx(r,{label:"Other Neighborhood Info.",name:"neighborhood_info4",value:e.values.neighborhood_info4,onChange:e.handleChange}),a.jsx(r,{label:"Other Neighborhood Info.",name:"neighborhood_info5",value:e.values.neighborhood_info5,onChange:e.handleChange}),a.jsx(r,{label:"Other Neighborhood Info.",name:"neighborhood_info6",value:e.values.neighborhood_info6,onChange:e.handleChange})]}),a.jsx(A,{rows:4,placeholder:"Property Description",maxLength:800,name:"description",value:e.values.description,onChange:e.handleChange}),a.jsx(i,{children:a.jsxs("div",{className:"upload-wrap",children:[a.jsxs("label",{htmlFor:"inputTag",className:"upload-label",children:[a.jsx("img",{src:"/assets/icons/shape-avatar.svg",alt:""}),a.jsx("span",{children:"Upload Images"}),a.jsx("input",{multiple:!0,name:"images",id:"inputTag",type:"file",className:"upload-input",onChange:w})]}),a.jsxs("span",{children:["Max file size 2MB. ",a.jsx("br",{})," CTRL+ click to select multiple images"]})]})}),a.jsx("div",{style:{display:"flex",gap:"15px",maxWidth:"90%",flexWrap:"wrap"},children:s==null?void 0:s.map((n,l)=>a.jsxs("div",{className:"image-display",style:{height:"auto",width:"30%"},children:[a.jsx("img",{src:URL.createObjectURL(n),alt:n.name,style:{width:"90%"}})," ",a.jsx("span",{role:"button",tabIndex:0,style:{border:"1px solid red",color:"orangered",cursor:"pointer"},className:"px-2",onClick:()=>_(l),onKeyDown:o=>o.key==="Enter"&&_(l),children:"x"})]},l))}),a.jsx(W,{sx:{marginTop:"25px"},fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",children:t!=null&&t.isLoading?a.jsx(j,{sx:{display:"flex"},children:a.jsx(G,{})}):"Post"})]})});return g.useEffect(()=>{h(m())},[h]),g.useEffect(()=>{t!=null&&t.isSuccess&&(t!=null&&t.postedProject)&&D.success("Project posted Successfullly!")},[t==null?void 0:t.isSuccess,t==null?void 0:t.postedProject]),a.jsxs(M,{maxWidth:"xl",children:[a.jsx(I,{variant:"h4",sx:{mb:5},children:"Post Project"}),a.jsx($,{container:!0,spacing:3,children:a.jsx(j,{sx:{...B({color:S(v.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1,width:"100%",padding:"50px"},children:a.jsx(i,{alignItems:"center",justifyContent:"center",sx:{height:1},children:a.jsx(z,{sx:{p:5,width:1,maxWidth:820},children:T})})})})]})}function he(){return a.jsxs(a.Fragment,{children:[a.jsx(L,{children:a.jsx("title",{children:"JEA | Post Project"})}),a.jsx(Y,{})]})}export{he as default};
