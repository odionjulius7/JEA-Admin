import{n as m,j as t,t as b,l as j,a9 as y,r as x,aa as v,ab as D,y as F,G as p,B as l,W as A}from"./index-85ecbf23.js";import"./account-view-e2fbd83e.js";import{h as u}from"./moment-662a48f5.js";import{D as w}from"./DataGrid-d389332e.js";import{T as C,a as L,b as g,c as f}from"./TabPanel-6881d110.js";import"./object-6447f611.js";import"./identity-f71e564d.js";import"./TextField-06a082fc.js";import"./Select-40dcb07a.js";import"./Menu-ee1e3660.js";import"./isMuiElement-3f40484d.js";import"./InputAdornment-c86009d8.js";import"./FormControlLabel-06623da6.js";const S=[{field:"id",headerName:"Loan ID",width:90,renderCell:a=>t.jsx("a",{href:`/loan/${a.row.id}`,children:a.value})},{field:"lender",headerName:"Lender",width:130},{field:"borrower",headerName:"Borrower",width:130},{field:"loanAmount",headerName:"Loan Value",width:130},{field:"expectedReturn",headerName:"Expected Return",width:130},{field:"balance",headerName:"Balance",width:130},{field:"initiationDate",headerName:"Initiation Date",width:120},{field:"dueDate",headerName:"Due Date",width:120},{field:"status",headerName:"Status",width:90,renderCell:a=>t.jsx(b,{variant:"contained",color:a.value==="active"&&"error"||"success",style:{padding:"0 0.6rem"},children:a.value})}];function G(){const a=m(e=>e.loan),i=[a==null?void 0:a.loan];function s(e){return e/100}const n=i==null?void 0:i.map((e,r)=>{const d={id:(e==null?void 0:e.id)||0,lender:e==null?void 0:e.lender_first_name,borrower:e==null?void 0:e.borrower_first_name,loanAmount:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s(e==null?void 0:e.amount)),expectedReturn:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s(e==null?void 0:e.expected_return)),balance:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format((s(e==null?void 0:e.expected_return)??0)-(s(e==null?void 0:e.amount_paid)??0)),initiationDate:u(e==null?void 0:e.createdAt).format("L"),dueDate:u(e==null?void 0:e.due_date).format("L"),status:e!=null&&e.status?"completed":"active"};return d.index=r,d});return t.jsxs("div",{style:{minHeight:200,backgroundColor:"#FFFFFF",borderRadius:"20px",boxShadow:"0 0 2px 0 rgba(145, 158, 171, 0.08), 0 12px 24px -4px rgba(145, 158, 171, 0.08)"},children:[t.jsx("h2",{style:{padding:"2rem 0rem 1rem 1rem"},children:"Loan Details"}),t.jsx(w,{rows:n,columns:S,initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},pageSizeOptions:[5,10]})]})}const T=[{field:"id",headerName:"Payment",width:70},{field:"amount",headerName:"Value",width:130},{field:"date",headerName:"Date",width:130},{field:"status",headerName:"Status",width:120,renderCell:a=>t.jsx(b,{variant:"text",color:a.value==="contested"&&"error"||a.value==="rejected"&&"error"||a.value==="awaiting_approval"&&"warning"||"success",style:{padding:"0 1rem"},children:a.value})},{field:"message",headerName:"Message",width:190}];function _(){var e;const a=m(r=>r.loan),i=((e=a==null?void 0:a.loan)==null?void 0:e.payment)||[];console.log(i);function s(r){return r/100}const n=i==null?void 0:i.map((r,d)=>{const o={id:d+1,amount:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s(r==null?void 0:r.amount)),date:u(r==null?void 0:r.createdAt).format("L"),status:r==null?void 0:r.status,message:r!=null&&r.message?r==null?void 0:r.message:""};return o.index=d,o});return t.jsx("div",{style:{minHeight:200,width:"60%",backgroundColor:"#FFFFFF",borderRadius:"20px",boxShadow:"0 0 2px 0 rgba(145, 158, 171, 0.08), 0 12px 24px -4px rgba(145, 158, 171, 0.08)"},children:t.jsx(w,{rows:n,columns:T,initialState:{pagination:{paginationModel:{page:0,pageSize:7}}},pageSizeOptions:[7,15]})})}function B(){var o,h;const a=j(),{id:i}=y();m(c=>c.loan);const s=m(c=>c),n=(h=(o=s==null?void 0:s.auth.user)==null?void 0:o.data)==null?void 0:h.token;x.useEffect(()=>{const c={token:n,id:i};a(v()),a(D(c))},[a,n,i]);const[e,r]=x.useState("1"),d=(c,N)=>{r(N)};return t.jsxs(F,{children:[t.jsx(p,{sx:{padding:"0 1rem"},children:t.jsx(G,{})}),t.jsx(l,{sx:{width:"100%",typography:"body1"},children:t.jsxs(C,{value:e,children:[t.jsx(l,{sx:{borderBottom:"1px solid",borderColor:"rgba(145, 158, 171, 0.2)",margin:"4rem 2rem 0rem 0rem",width:"70%"},children:t.jsxs(L,{sx:{".css-heg063-MuiTabs-flexContainer":{justifyContent:"center",gap:"1rem"}},onChange:d,"aria-label":"lab API tabs example",children:[t.jsx(g,{label:"Loan Repayment Breakdown",value:"1",sx:{fontSize:"20px"}}),t.jsx(g,{label:"Agreements",value:"2",sx:{fontSize:"20px"}})]})}),t.jsx(f,{value:"1",children:t.jsx(p,{sx:{padding:"0 1rem",marginTop:"4.2rem"},children:t.jsx(_,{})})}),t.jsx(f,{value:"2",children:"2"})]})})]})}function q(){return t.jsxs(t.Fragment,{children:[t.jsx(A,{children:t.jsx("title",{children:"JEA | Details"})}),t.jsx(B,{})]})}export{q as default};
